<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
    <title>无标题文档2</title>

    <style>

       body {
            overflow: hidden;
            margin: 0;
        }

       
        .animate {
            -webkit-transition: all .3s;
            -moz-transition: all .3s;
            transition: all .3s;
        }

     
    </style>
</head>
<body>



<div id="log"style=" position:fixed ;left:5px; top:5px; ">s</div>
<div id="img3" class="img3" >

<svg id="SvgMap" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.2" baseProfile="tiny" x="0px" y="0px" width="1920px" height="1080px" viewBox="0 0 1920 1080" xml:space="preserve">
<g id="Background">
	<rect fill="#F6F5F0" width="1920" height="1080"/>
</g>
<g id="Rroad">
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M1063.422,553.469c0,0,2.912,0.698,6.576,1.698   c3.764,1.027,23.667,1.5,34,1.833S1174,568.5,1184,570.25s112.438,34.625,112.438,34.625L1335.75,618c0,0,20.5,8.188,28.75,11.063   s18.25-1.375,18.25-1.375l24.75-11.125"/>
    <path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M1065.379,553.987 L1053.796,600.838"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M1069.625,536.469 L1065.379,553.987"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M818.5,639.063c0,0,8.25-0.563,10.375-0.625   s5.313-1.313,5.313-1.313s42.688-30.438,44.75-31.563s27.125-13.875,28.563-14.813s7.375-2,9.25-2.188s4.688,0.75,9.625,1.5   s66.292,9.771,70.625,10.344s20.997-0.486,22.83-0.403s12-2.083,15.25-2.75s12.75,0.167,16.084,0.75   c1.123,0.196,2.208,0.525,3.318,0.927"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M1167.333,668.334c0,0-4.417-22.498-6.5-28.165   s-7.332-14.251-12.916-18.334s-8.418-6.417-13.084-7.25s-35.666-5.752-47.499-7.918s-21.171-3.664-25.504-4.997   c-2.873-0.884-5.16-1.951-7.348-2.74"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M728.93,789.162   c-0.919,0.801-1.957,1.43-3.18,1.838c-4.5,1.5-91.625,20.875-96.375,22.75s-8,4-9.375,8.125s-9.125,23.75-12.25,28.25   s-13.125,18.75-16.125,24.125c0,0-7.75,10.75-7.5,17.5"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M832.465,750.747   c-1.54,0.041-2.655,0.41-3.215,0.542C825,752.289,751,768,748.75,769s-11,6-13.75,11c-2.003,3.642-3.608,7.018-6.07,9.162"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M966.469,737.685   c-5.082,0.896-8.8,1.529-10.719,1.815c-16.75,2.5-65,10.5-75.5,11.5c-9.116,0.868-37.643-0.525-47.785-0.253"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M1032.985,725.534   c-26.488,4.906-52.035,9.597-66.517,12.15"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M1126.5,708.094c0,0-48.139,9.035-93.515,17.44"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M1033.422,727.453c0,0-1.255-19.787-4.255-21.62   S1021.333,703,1017,704s-55.281,10.906-55.281,10.906"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M960.585,685.564   c0.495-4.274,0.75-10.817-0.585-15.064"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M959.956,693.322   c-0.146-1.848-0.155-3.358,0.044-4.155c0.181-0.726,0.399-2.006,0.585-3.603"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M963.589,714.09   c-0.476-3.311-0.919-5.951-1.256-7.09c-0.935-3.155-2.033-9.342-2.377-13.678"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M966.667,739.646c0,0-1.675-15.774-3.078-25.556"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M961.917,693 L920.917,699.751"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M988.084,680.501c0,0-21.999,5.332-23.583,5.416   s-5.917-0.666-5.917-0.666"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M832.875,752.625c0,0-18.208-83.458-18.708-86.125   s-0.667-7.834-1.667-8.667s-2.333-1.875-2.333-1.875"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M944.75,770.5c0,0-21,4.5-28.5,4.5   s-28.75-2-34.25-2.25s-34.541,2.959-38.458,2.959s-66.041,3.125-76.041,5.125s-24,7.666-27.833,8.833s-6.333,1.666-7.667,1.5   s-4.5-3.333-4.5-3.333"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M600.008,781.657   c0.001,0.065-0.002,0.128-0.008,0.188c-0.167,1.667-8.333,21.344-9,23.177s-11.5,16.999-19.5,21.166s-27.333,16.171-29.833,18.005   s-24.917,34.557-26.292,47.557"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M615.75,701.083c0,0-30.083-2.084-34.417-1.25   s-17.666,2.668-18.833,3.834s-5.334,2.834-5.667,6.5s0.833,10.333,6,16.333s32.5,45.013,33.667,47.513   c1.125,2.409,3.488,5.902,3.508,7.645"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M796.104,480.305   c2.157-17.033,6.031-42.118,6.563-45.305c0.75-4.5,5.583-14,7.833-17.5s33.501-78.167,36.001-83.667s7.833-9.333,12.833-11.167   s31.333,0,31.333,0s139.25-1.5,148.083-1.583s10.333-6.083,11.167-8.583s-1.834-6.583-1.834-6.583"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M798.142,540.301   c-1.406-14.58-3.345-39.308-3.475-45.133c-0.049-2.189,0.549-7.842,1.438-14.863"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M820.443,638.956   c-0.601-4.042-4.382-7.581-7.443-13.459c-4.167-8-12.667-67.663-13.833-75.829c-0.261-1.823-0.621-5.176-1.025-9.367"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M811.66,657.133   c3.063-4.266,6.336-9.849,8.007-13.469c0.796-1.725,0.994-3.249,0.776-4.708"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M720,727.875c0.819-0.768,20.048-41.107,23-46.125   c5-8.5,6.5-10.75,13-15.25s46.833-3.174,49.667-3.341c1.255-0.074,3.558-2.634,5.993-6.026"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M598,781.5c0,0,8,0.688,10.313,0.438   s76.438-15.063,86.188-20.313s16.375-14.625,18.75-20c0,0,4.75-11.875,6.75-13.75"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M725.5,646.25c0,0,3.252,12.75,2.001,20.75   s-3.251,32-4.001,34s-4.167,13.917-4.5,16.75c0,0-1,9.666,2.25,11.333"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M567.625,432.375c0,0,11.75,2,12.875,5.375   s1.625,7.5,2.125,14.25s1.625,25.25,4,28.25s3,5.75,13.625,6.5s57.875-1.375,57.875-1.375s131.75-5.25,133.938-5.125   s5.354,0,6.042,0.083"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M727.925,550.957   c2.826-0.933,5.058-1.533,6.2-1.582c5.875-0.25,66-9.375,66-9.375"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M591.967,574.869   c4.168-0.05,7.153,0.023,8.533,0.256c10.375,1.75,34.625,5.75,45.25,4.125s27.125-6.125,38.375-10.75   c9.063-3.726,32.091-13.676,43.8-17.543"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M570.377,510.284   c-55.104-3.35-111.21-6.784-111.21-6.784s-5.334,1.833-6.667,4.833s-0.833,52.5,0,55.167s1.5,9.333,5,13s5.333,5.167,18.5,4.667   c11.415-0.434,88.81-5.972,115.967-6.298"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M728.547,552.766c0,0-3.963-13.849-6.047-17.016   s-5.333-6.75-8.833-8.75s-14.166-7-17.833-7.917s-17.25-2.5-20.083-2.5c-1.382,0-52.923-3.111-105.373-6.299"/>
	<path fill="none" stroke="#FFFFE0" stroke-width="4" stroke-miterlimit="10" d="M592.375,576.813c0,0-1.151-5.938-2.263-8.438   s-7.612-21.49-9.487-25.995s-10-27.255-10.125-28.755s-0.25-2,0-5.375"/>
</g>

<g id="Architecture">
	<polygon fill="#E8DDCE" id="test" points="865.667,648.045 862.333,638.956 920.917,625.002 927.667,652.335 882.333,661.668 883,668.334    869.667,668.334 870.333,673.668 855,678.032 855,683.212 825.667,687.666 821.521,670.5 836.125,668.334 832.875,661.668    852.333,657.133 850.333,651.002  "/>
	<polygon fill="#E8DDCE" points="941.417,650.25 944.75,668.334 966.469,664.25 968.75,678.032 988.084,674.75 989.5,678.032    1030,670.5 1027.75,661 1037.25,659.25 1031,633.632 1011.5,636.75 1015,653.5 973.334,661 969.75,644.5  "/>
	<polygon fill="#E8DDCE" points="1044.5,649 1051.75,670.5 1059.588,668.334 1062.25,683.212 1156.75,663.25 1149,631.75    1126.5,624.25  "/>
	<polygon fill="#E8DDCE" points="1037.25,704.291 1039.25,716.814 1123.5,701.25 1119.5,683.212 1102.75,685.924 1103.5,693  "/>
	<polygon fill="#E8DDCE" points="971.75,719 974.25,731.609 1024.5,721 1024.5,709.5  "/>
	<polygon fill="#E8DDCE" points="868,689.443 870.5,700.014 847.25,704.291 851.25,718.75 872,714.09 879.25,746.25 958.584,732.75    955.25,717.847 889.75,730 884,704.291 918.25,698 917.75,693.322 931,691.5 927.667,678.032  "/>
	<polygon fill="#E8DDCE" points="936.333,756.167 938.083,765.5 945.167,764.667 945.833,768.083 975.834,760.583 972.417,748.417     "/>
	<polygon fill="#E8DDCE" points="749.875,691.5 748.25,682.125 782.875,676.25 785.5,692.504 798.875,690.5 798.875,693    812.625,691.75 816.875,722.25 746.75,731.375 740.875,692.504  "/>
	<polygon fill="#E8DDCE" points="742,738.25 744.625,752.625 797.25,745.438 794.25,731.375  "/>
	<polygon fill="#E8DDCE" points="722.813,772.438 725.125,784.188 650.838,801.5 649.672,794.5 643.838,795.833 643.838,791.833    607.172,801.5 604.172,788.167 640.838,781.657 642.505,786.969 649.005,785.167 649.005,789.162  "/>
	<polygon fill="#E8DDCE" points="628.338,823 632.672,838 668.838,830.5 668.838,835.167 711.505,825.167 707.338,810.333    669.922,818.833 667.338,813.167  "/>
	<polygon fill="#E8DDCE" points="559.009,862.501 566.342,872.668 598,853.335 594.509,848.001 608.676,838.668 604.172,830.168    586.266,840.456 589.176,845.335  "/>
	<polygon fill="#E8DDCE" points="540.009,855.335 550.176,859.168 541.176,876.335 529.676,871.835  "/>
	<polygon fill="#E8DDCE" points="541.009,823.165 548.009,833.165 574.842,816.832 572.176,812.998 583.842,805.665    577.176,795.832 554.509,807.832 557.692,813.832  "/>
	<polygon fill="#E8DDCE" points="634.5,759.167 638.167,770.5 698.333,752.625 711.505,729.083 704,725.334 690.5,745.001  "/>
	<polygon fill="#E8DDCE" points="675,693.501 677.5,709.834 716,704.291 713.167,688.334  "/>
	<polygon fill="#E8DDCE" points="681.5,657.133 684.5,673.494 720,666.994 718.855,651.828  "/>
	<polygon fill="#E8DDCE" points="708.5,629.987 710.667,645.32 727.788,643.32 724,621.32 716,621.32 717,629.154  "/>
	<polygon fill="#E8DDCE" points="755,610.333 749.667,631.333 760.667,635 765.83,613.801  "/>
	<polygon fill="#E8DDCE" points="739,594.333 744,608 776,598.333 764.025,565.294 753.667,552.766 728.547,566.667 737,576.813    747.333,571 756,588.538  "/>
	<polygon fill="#E8DDCE" points="568.333,613.801 568.333,624 584.119,622.666 583.842,613.801  "/>
	<polygon fill="#E8DDCE" points="549,640.667 552,649.667 549,651.828 552,662.661 568.333,658.333 565.667,654 572.667,651.828    568.333,641.667 562.426,643.333 560.833,637  "/>
	<polygon fill="#E8DDCE" points="564.667,687.666 568.333,696.667 581.365,695 586.266,692.166 579.333,680.667  "/>
	<polygon fill="#E8DDCE" points="470.333,524.672 470.333,540 568.333,534.672 568.333,520.006  "/>
	<polygon fill="#E8DDCE" points="474.667,559.673 476.333,572.006 570.355,568.673 570.355,554.339  "/>
	<polygon fill="#E8DDCE" points="586.266,548.006 604.667,530.003 633,527.339 637,523.672 642.333,530.003 653.333,530.003    656.333,525.339 659.946,525.006 663.333,530.003 681.5,530.003 700.75,545.479 690.667,552.766 675,552.766 658,567.339    634.667,567.339 612.667,557.339 599.667,548.673 596,552.766  "/>
	<polygon fill="#E8DDCE" points="333.673,503.5 333.673,520.006 435.34,514.008 434.006,496.674  "/>
	<polygon fill="#E8DDCE" points="342.006,537.674 342.006,554.339 435.34,548.675 435.34,533.341  "/>
	<polygon fill="#E8DDCE" points="348.006,574.341 348.006,591.008 438.006,585.008 438.006,569.341  "/>
	<polygon fill="#E8DDCE" points="292.673,463.008 295.34,499.674 315.673,499.674 315.673,463.008  "/>
	<polygon fill="#E8DDCE" points="270.673,464.674 272.673,496.674 287.006,495.008 287.006,464.674  "/>
	<polygon fill="#E8DDCE" points="375.673,432.375 375.673,464.674 451.677,463.008 450.006,429.341  "/>
	<polygon fill="#E8DDCE" points="338.006,450.008 335.673,476.674 350.34,478.341 352.673,452.341  "/>
	<polygon fill="#E8DDCE" points="481.34,459.643 481.34,476.008 539.34,473.674 539.34,459.643  "/>
	<polygon fill="#E8DDCE" points="593.167,431.334 595,481.001 690.667,478.001 689,428.334  "/>
	<polygon fill="#E8DDCE" points="820.443,429.341 811.66,467.825 825.667,470.5 832.875,432.375  "/>
	<polygon fill="#E8DDCE" points="1187.334,773.5 1207.834,825 1288.334,797.333 1283.334,784.333 1219.167,802.833    1210.001,782.833 1232.001,775.667 1230.334,768.5 1254.334,762 1251.334,754.667 1265.834,751.333 1260.001,736.167    1240.834,743.5 1242.001,749.5 1218.834,757 1220.834,762  "/>
	<polygon fill="#E8DDCE" points="1315.659,773.335 1321.659,786.668 1372.659,770.5 1367.659,755.335  "/>
	<polygon fill="#E8DDCE" points="1298.326,736.167 1304.326,751.289 1356.659,731.609 1350.992,720.555  "/>
	<polygon fill="#E8DDCE" points="1228.992,714.09 1241.659,727.453 1266.992,703.706 1278.326,674.668 1259.326,668.334    1242.326,700.014  "/>
	<polygon fill="#E8DDCE" points="1367.326,746.25 1388.326,766.333 1401.992,754 1388.992,741 1414.659,716.814 1422.992,725.534    1436,714.09 1420.659,700.014  "/>
	<polygon fill="#E8DDCE" points="1358.992,720.555 1372.659,733.174 1413.326,693.322 1397.992,678.032 1386.159,652    1327.492,670.5 1329.326,675.333 1278.326,692.587 1283.992,712.141 1338.326,691 1338.326,685.564 1384.326,673 1390.326,685.924     "/>
	<polygon fill="#E8DDCE" points="1100.625,559.668 1097.992,579.668 1088.992,579.668 1084.659,591.765 1120.326,600.838    1159.992,604.001 1159.992,593.668 1178.659,597.334 1183.659,573.001  "/>
	<polygon fill="#E8DDCE" points="1192.992,577.858 1183.659,602.334 1197.326,604.001 1194.992,611.001 1235.461,624.25    1235.461,633.632 1253.659,633.632 1255.326,616.668 1258.326,610.001 1272.992,612.334 1274.992,605.745 1233.659,591.765    1228.992,602.334 1218.326,600.838 1222.992,588.538  "/>
	<polygon fill="#E8DDCE" points="1259.659,643 1274.992,644.334 1282.992,605.745 1291.659,609.668 1282.992,668.334    1269.326,668.334 1271.326,653.73 1259.659,653.73  "/>
	<polygon fill="#E8DDCE" points="1298.326,611.668 1306.992,611.668 1306.992,620.001 1315.659,620.001 1313.992,659.334    1310.659,666.668 1313.659,670.5 1306.992,680.501 1288.334,674.001 1294.659,653.73  "/>
	<polygon fill="#E8DDCE" points="1107.667,494.333 1095,550.957 1187.334,568.333 1191.667,553.469 1183.659,548.333    1183.659,510.303 1156.75,510.303 1156.75,502.333  "/>
	<polygon fill="#E8DDCE" points="1010.333,453.667 1010.333,474.333 1092.333,474.333 1095,453.667  "/>
	<polygon fill="#E8DDCE" points="1050.078,429.341 1050.078,446.333 1105.667,443 1105.667,426.333  "/>
</g>

<g id="OtherArchitecture">
	<path fill="#BBD78D" d="M850.333,381.668l-24.667,138c0,0,9.5,46.667,41.833,55.333s75.167-3.833,78.333-18S976.25,405,976.25,405   s-21.75-48-55-48.25S855.167,367.087,850.333,381.668z"/>
</g>

<g id="Name">
	<text transform="matrix(1 0 0 1 887.5 625.5)" font-family="'AdobeSongStd-Light-GBpc-EUC-H'" font-size="12">教学楼</text>
	<text transform="matrix(1 0 0 1 963.5 624)" font-family="'AdobeSongStd-Light-GBpc-EUC-H'" font-size="12">图书馆</text>
	<text transform="matrix(1 0 0 1 1057 630)" font-family="'AdobeSongStd-Light-GBpc-EUC-H'" font-size="12">科学楼</text>
	<text transform="matrix(1 0 0 1 1064 576.5)" font-family="'AdobeSongStd-Light-GBpc-EUC-H'" font-size="12">东门</text>
	<text transform="matrix(1 0 0 1 808.5 643)" font-family="'AdobeSongStd-Light-GBpc-EUC-H'" font-size="12">第二食堂</text>
	<text transform="matrix(1 0 0 1 717.5225 554.7646)" font-family="'AdobeSongStd-Light-GBpc-EUC-H'" font-size="12">向高园餐厅</text>

	<text transform="matrix(1 0 0 1 778 523)" font-family="'AdobeSongStd-Light-GBpc-EUC-H'" font-size="12">综合楼</text>
	<text transform="matrix(1 0 0 1 1043.5 316.5)" font-family="'AdobeSongStd-Light-GBpc-EUC-H'" font-size="12">北门</text>
	<text transform="matrix(1 0 0 1 748.5 743.5)" font-family="'AdobeSongStd-Light-GBpc-EUC-H'" font-size="12">学友超市</text>
</g>
</svg>
</div>
<svg y="0px" width="36px" height="74px" viewBox="0 0 36 74" xml:space="preserve"  style=" position:fixed ;right:5px; bottom:5px;  "  >
<g id="minus" onclick="mapMinus()">
	<path fill="#FAEE00" d="M9,74c-5,0-9-4-9-9V38h36v27c0,5-4,9-9,9"/>
	<rect x="6" y="53" fill="#FFFFFF" width="24" height="6"/>
</g>
<g id="plus" onclick="mapPlus()">
	<path fill="#DAE000" d="M27,0c5,0,9,4,9,9v27H0V9c0-5,4-9,9-9"/>
	<polygon fill="#FFFFFF" points="30,15 21,15 21,6 15,6 15,15 6,15 6,21 15,21 15,30 21,30 21,21 30,21 	"/>
</g>
</svg>
 <script type="text/javascript" src="js/hammer.min.js"></script>
  <!--<script type="text/javascript" src="http://hammerjs.github.io/dist/hammer.min.js"></script>-->
<script>

    var reqAnimationFrame = (function () {
        return window[Hammer.prefixed(window, 'requestAnimationFrame')] || function (callback) {
            window.setTimeout(callback, 1000 / 60);
        };
    })();

    var log = document.querySelector("#log");
    var el = document.querySelector("#img3");

    var START_X = Math.round((window.innerWidth - el.offsetWidth) / 2);
    var START_Y = Math.round((window.innerHeight - el.offsetHeight) / 2);

    var ticking = false;
    var transform;   //图像效果
    var timer;
var initAngle = 0;  //旋转角度
var initScale = 1;  //放大倍数

   var mc = new Hammer.Manager(el);   //用管理器  可以同时触发旋转 拖拽  移动
	//var mc = new Hammer(el);	      //旋转和移动互斥
/**
ev.srcEvent.type  touchstart  touchend touchmove
ev.deltaX  手势移动位移变量  
*/
	mc.add(new Hammer.Pan({ threshold: 0, pointers: 0 }));  
	mc.add(new Hammer.Rotate({ threshold: 0 })).recognizeWith(mc.get('pan'));
    mc.add(new Hammer.Pinch({ threshold: 0 })).recognizeWith([mc.get('pan'), mc.get('rotate')]);
	//结束时做一些处理
    mc.on("hammer.input", function(ev) {
        if(ev.isFinal) {
		console.log(START_X+"  "+transform.translate.x  +"   "+ev.deltaX);
		START_X = transform.translate.x ;
		START_Y = transform.translate.y ;
        }
		
    });
    mc.on("panstart panmove", onPan);
    mc.on("rotatestart rotatemove rotateend", onRotate);
    mc.on("pinchstart pinchmove", onPinch);
/**
第二次进入拖拽时  delta位移重置
移动时 初始位置startxy不动。delta增加
*/
	function onPan(ev){
		if(!ev.isFinal) {
		 el.className = '';
			console.log(START_X   +"  "+  START_Y +" |  "+ev.deltaX   +"  "+  ev.deltaY);		
				transform.translate = {
					x: START_X + ev.deltaX,
					y: START_Y + ev.deltaY
				};
				requestElementUpdate();
		}	   
	}
	
	function onPinch(ev){
		if(ev.type == 'pinchstart') {
			initScale = transform.scale || 1;
		}
		el.className = '';
		transform.scale = initScale * ev.scale;
		requestElementUpdate();	
	}

	//旋转相关
	var  preAngle =0 ;
	var  tempAngleFlag=0;
	var  deltaAngle = 0;	
	var  startRotateAngle = 0;
	
	function onRotate(ev) {
		
		//点下第二个触控点时触发
        if(ev.type == 'rotatestart') {			    
				startRotateAngle =  ev.rotation ;			 
				tempAngleFlag = 0 ;
        }	
		if(ev.type == 'rotatemove'){
			if(tempAngleFlag == 0){
				preAngle = startRotateAngle;
				tempAngleFlag ++;
			}else{				
				deltaAngle = ev.rotation - preAngle;
				el.className = '';
				transform.rz = 1;  //非0  垂直xy轴
				transform.angle =initAngle + deltaAngle;									
				requestElementUpdate();	
			}
		}
			
		//旋转结束  记录当前图片角度	
		if(ev.type =='rotateend'){
			initAngle = transform.angle;
		}	
    }



    function updateElementTransform() {
        var value = [
                    'translate3d(' + transform.translate.x + 'px, ' + transform.translate.y + 'px, 0)',
                    'scale(' + transform.scale + ', ' + transform.scale + ')',
                    'rotate3d('+ transform.rx +','+ transform.ry +','+ transform.rz +','+  transform.angle + 'deg)'
        ];
document.getElementById("log").innerHTML =transform.scale.toFixed(2);
        value = value.join(" ");
        el.style.webkitTransform = value;  /*为Chrome/Safari*/
        el.style.mozTransform = value; /*为Firefox*/
        el.style.transform = value; /*IE Opera?*/
        ticking = false;
    }

    function requestElementUpdate() {
        if(!ticking) {
            reqAnimationFrame(updateElementTransform);
            ticking = true;
        }
    }

    function logEvent(str) {
        log.insertBefore(document.createTextNode(str +"\n"), log.firstChild);
    }
	
	/**
	初始化设置
	*/
    function resetElement() {

        el.className = 'animate';
		 transform = {
            translate: { x: START_X, y: START_Y },
            scale: 1,
            angle: 0,
            rx: 0,
            ry: 0,
            rz: 0
        };
        requestElementUpdate();
    }
	
	
    resetElement();

	function mapMinus(){//缩小
	if(transform.scale>0.5){
		el.className = 'animate';
		transform.scale = transform.scale * (1/1.2);
		
		requestElementUpdate();	
		
	}
		
		
		
	}

	function mapPlus(){ //放大
	
	if(transform.scale<44){
		el.className = 'animate';
		transform.scale = transform.scale* 1.2;
		
		
		
		requestElementUpdate();	
	}
		
	}
</script>
</body>
</html>
